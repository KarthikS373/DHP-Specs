{
  "post": {
    "tags": ["Beckn App Platform (BAP)"],
    "description": "Send cancellation request_id with reasons list in case of cancellation request. Else send cancelled order object",
    "requestBody": {
      "description": "TODO",
      "content": {
        "application/json": {
          "schema": {
            "type": "object",
            "properties": {
              "context": {
                "allOf": [
                  { "$ref": "#/components/schemas/Context" },
                  {
                    "properties": {
                      "action": {
                        "enum": ["on_cancel"]
                      }
                    },
                    "required": ["action"]
                  }
                ]
              },
              "message": {
                "type": "object",
                "properties": {
                  "order": { "$ref": "#/components/schemas/Order" }
                },
                "required": ["order"]
              },
              "error": { "$ref": "#/components/schemas/Error" }
            },
            "required": ["context"]
          },
          "examples": {
            "Return healthcare appointment cancellation by the patient": {
              "value": {
                "context": {
                  "country": "IND",
                  "bpp_uri": "https://api.example-bpp.com/dobpp/beckn/7f7896dd-787e-4a0b-8675-e9e6fe93bb8f",
                  "domain": "nic2004:86211",
                  "timestamp": "2023-09-23T15:30:00.987Z",
                  "bap_id": "example-bap.com",
                  "bpp_id": "example-bpp.com",
                  "transaction_id": "c1a2n3c4e5l6l7a8t9i0o1n2-1b2y3p4a5t6i7e8n9t",
                  "message_id": "p4a5t6i7e8n9t-8c9a0n1c2e3l4l5a6t7i8o9n",
                  "city": "std:080",
                  "core_version": "1.1.0",
                  "action": "on_cancel",
                  "bap_uri": "https://api.example-bap.com/pilot/bap/healthcare/v1"
                },
                "message": {
                  "order": {
                    "id": "12345",
                    "provider": {
                      "id": "hospital-xyz",
                      "descriptor": {
                        "name": "XYZ Hospital"
                      }
                    },
                    "patient": {
                      "id": "patient-abc",
                      "descriptor": {
                        "name": "John Doe"
                      }
                    },
                    "items": [
                      {
                        "id": "service-001",
                        "descriptor": {
                          "name": "MRI Scan"
                        },
                        "tags": {
                          "groups/1/descriptor/name": "Scan Type",
                          "groups/1/list/1/descriptor/name": "Brain MRI",
                          "groups/1/list/1/value": "â‚¹ 5000"
                        }
                      }
                    ],
                    "quote": {
                      "value": "5000",
                      "currency": "INR"
                    },
                    "fulfillment": {
                      "id": "fulf_12345",
                      "state": {
                        "descriptor": {
                          "code": "APPOINTMENT_CANCELLED",
                          "name": "Appointment Cancelled"
                        }
                      },
                      "start": {
                        "authorization": {
                          "type": "OTP",
                          "token": "987654"
                        },
                        "location": {
                          "gps": "12.345678, 98.765432",
                          "address": {
                            "country": "India",
                            "state": "Karnataka",
                            "city": "Bengaluru",
                            "street": "Main Street",
                            "area_code": "560001"
                          }
                        }
                      },
                      "end": {
                        "location": {
                          "gps": "12.345678, 98.765432",
                          "address": {
                            "country": "India",
                            "state": "Karnataka",
                            "city": "Bengaluru",
                            "street": "Main Street",
                            "area_code": "560001"
                          }
                        }
                      },
                      "agent": {
                        "name": "Dr. Jane Smith",
                        "phone": "+91-9876543210",
                        "rateable": true,
                        "rating": "4.5"
                      }
                    },
                    "payments": [
                      {
                        "id": "c1a2n3c4e5l6l7a8t9i0o1n2-8p9a0t1i2e3n4t",
                        "type": "POST-FULFILLMENT",
                        "params": {
                          "amount": "5000",
                          "currency": "INR",
                          "transaction_status": "CANCELLED"
                        }
                      }
                    ],
                    "documents": [
                      {
                        "label": "Cancellation Terms",
                        "url": "https://example-bpp.com/cancellation-terms"
                      }
                    ]
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
